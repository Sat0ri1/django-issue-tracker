{% extends "base.html" %}

{% block title %}{{ project.name }}{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold text-center mb-6">{{ project.name }}</h1>

<!-- Dodaj style dla pól formularza -->
<style>
  input[type="text"], textarea {
    background-color: #f9fafb; /* jasne tło */
    border: 1px solid #d1d5db; /* szara ramka */
    border-radius: 0.375rem;   /* zaokrąglenie */
    padding: 0.5rem 0.75rem;
    width: 100%;
    margin-bottom: 0.5rem;
    transition: border-color 0.2s;
  }
  input[type="text"]:focus, textarea:focus {
    outline: none;
    border-color: #2563eb;     /* niebieska ramka po focusie */
    box-shadow: 0 0 0 2px #60a5fa;
  }
</style>

<!-- Formularz dodawania issue -->
<div class="mb-6 bg-white p-4 rounded shadow">
  {% if user.is_authenticated %}
    <form action="{% url 'create_issue' project_pk=project.pk %}" method="post" hx-post="{% url 'create_issue' project_pk=project.pk %}" hx-target="#issues-list" hx-swap="beforeend">
      {% csrf_token %}
      {{ issue_form.as_p }}
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Add a report</button>
    </form>
  {% else %}
    <p class="text-gray-600">You must <a href="{% url 'login' %}" class="text-blue-600 underline">log in</a>, to add a report.</p>
  {% endif %}
</div>

<!-- Lista issue -->
<div id="issues-list" class="space-y-2">
  {% for issue in project.issues.all %}
    {% include "issues/_issue_item.html" %}
  {% empty %}
    <p class="text-gray-500">No reports</p>
  {% endfor %}
</div>
{% endblock %}
